<%- include('partials/header', { title: 'Contact Us' }) %>

    <div class="container-sm">
        <div class="page-header">
            <h1>‚úâÔ∏è Contact Us</h1>
            <p class="text-muted">Fill out the form below and we'll get back to you soon.</p>
        </div>

        <!-- Success Alert -->
        <% if (success) { %>
            <div class="alert alert-success">
                ‚úÖ <strong>Message sent!</strong> Thank you for reaching out. We'll reply shortly.
            </div>
            <% } %>

                <!-- Error Alert -->
                <% if (error) { %>
                    <div class="alert alert-error">
                        ‚ö†Ô∏è <%= error %>
                    </div>
                    <% } %>

                        <!-- Exercise 3: Contact Form (POST via EJS) -->
                        <% if (!success) { %>
                            <div class="card">
                                <form method="POST" action="/contact" id="contactForm">

                                    <div class="grid grid-2">
                                        <div class="form-group">
                                            <label for="name">Full Name <span
                                                    style="color:var(--accent)">*</span></label>
                                            <input type="text" id="name" name="name" placeholder="Your full name"
                                                value="<%= formData.name || '' %>" required />
                                        </div>
                                        <div class="form-group">
                                            <label for="email">Email Address <span
                                                    style="color:var(--accent)">*</span></label>
                                            <input type="email" id="email" name="email" placeholder="your@email.com"
                                                value="<%= formData.email || '' %>" required />
                                        </div>
                                    </div>

                                    <div class="form-group">
                                        <label for="subject">Subject</label>
                                        <input type="text" id="subject" name="subject" placeholder="What's this about?"
                                            value="<%= formData.subject || '' %>" />
                                    </div>

                                    <div class="form-group">
                                        <label for="message">Message <span style="color:var(--accent)">*</span></label>
                                        <textarea id="message" name="message" placeholder="Write your message here..."
                                            required><%= formData.message || '' %></textarea>
                                    </div>

                                    <button type="submit" class="btn btn-primary" id="sendBtn">
                                        üì® Send Message
                                    </button>
                                </form>
                            </div>
                            <% } else { %>
                                <div class="card text-center" style="padding:2.5rem">
                                    <div style="font-size:3.5rem;margin-bottom:1rem">üéâ</div>
                                    <h3>Message Received!</h3>
                                    <p class="text-muted mt-1">We'll get back to you as soon as possible.</p>
                                    <a href="/contact" class="btn btn-primary mt-2">Send Another</a>
                                    <a href="/" class="btn btn-outline mt-2" style="margin-left:0.5rem">Go Home</a>
                                </div>
                                <% } %>

                                    <div class="card mt-2"
                                        style="background:rgba(108,99,255,0.07);border-color:rgba(108,99,255,0.25)">
                                        <p style="font-size:0.85rem;color:var(--text-muted)">
                                            üí° <strong>Exercise 3 ‚Äî EJS Contact Form:</strong>
                                            This form submits via <code>POST /contact</code>, validates server-side, and
                                            re-renders with errors or a success state.
                                        </p>
                                    </div>
    </div>

    <%- include('partials/footer') %>